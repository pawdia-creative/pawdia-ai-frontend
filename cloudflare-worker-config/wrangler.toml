# Cloudflare Workers 后端部署配置
# pawdia-ai-backend 项目

name = "pawdia-ai-backend"
main = "server.js"
compatibility_date = "2023-12-18"

# Workers 路由配置
routes = [
  { pattern = "api.pawdia-ai.com/*", zone_id = "your-zone-id" }
]

# D1 数据库配置
[[d1_databases]]
  binding = "DB"
  database_name = "pawdia-ai-db"
  database_id = "your-database-id"

# 环境变量
[env.production.vars]
  NODE_ENV = "production"
  JWT_SECRET = "your-jwt-secret"
  STRIPE_SECRET_KEY = "your-stripe-secret-key"
  CLOUDINARY_CLOUD_NAME = "your-cloudinary-cloud-name"
  CLOUDINARY_API_KEY = "your-cloudinary-api-key"
  CLOUDINARY_API_SECRET = "your-cloudinary-api-secret"
  RESEND_API_KEY = "your-resend-api-key"
  PAYPAL_CLIENT_ID = "your-paypal-client-id"
  PAYPAL_CLIENT_SECRET = "your-paypal-client-secret"

# 存储桶绑定
[[r2_buckets]]
  binding = "STORAGE"
  bucket_name = "pawdia-ai-storage"

# 环境变量（开发）
[env.development.vars]
  NODE_ENV = "development"
  DEBUG = "true"

# Cron 触发器（可选）
[triggers]
  crons = ["0 */6 * * *"]  # 每6小时执行一次

# 限制配置
[limits]
  cpu_ms = 50  # CPU时间限制（毫秒）
  memory = 128  # 内存限制（MB）
  concurrent_requests = 1000  # 并发请求限制